!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=20)}([function(e,t,o){"use strict";var n;t.__esModule=!0,function(e){e[e.Before=1]="Before",e[e.After=2]="After",e[e.Inside=3]="Inside",e[e.None=4]="None"}(n=t.Position||(t.Position={})),t.position_names={before:n.Before,after:n.After,inside:n.Inside,none:n.None},t.getPositionName=function(e){for(var o in t.position_names)if(t.position_names.hasOwnProperty(o)&&t.position_names[o]===e)return o;return""},t.getPosition=function(e){return t.position_names[e]};var r=function(){function e(t,o,n){void 0===o&&(o=!1),void 0===n&&(n=e),this.name="",this.setData(t),this.children=[],this.parent=null,o&&(this.id_mapping={},this.tree=this,this.node_class=n)}return e.prototype.setData=function(e){var t=this,o=function(e){null!=e&&(t.name=e)};if(e)if("object"!=typeof e)o(e);else for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"label"===n?o(r):"children"!==n&&(this[n]=r)}},e.prototype.loadFromData=function(e){this.removeChildren();for(var t=0,o=e;t<o.length;t++){var n=o[t],r=new this.tree.node_class(n);this.addChild(r),"object"==typeof n&&n.children&&r.loadFromData(n.children)}},e.prototype.addChild=function(e){this.children.push(e),e._setParent(this)},e.prototype.addChildAtPosition=function(e,t){this.children.splice(t,0,e),e._setParent(this)},e.prototype.removeChild=function(e){e.removeChildren(),this._removeChild(e)},e.prototype.getChildIndex=function(e){return jQuery.inArray(e,this.children)},e.prototype.hasChildren=function(){return 0!==this.children.length},e.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand},e.prototype.iterate=function(e){var t=function(o,n){if(o.children)for(var r=0,i=o.children;r<i.length;r++){var a=i[r];e(a,n)&&a.hasChildren()&&t(a,n+1)}};t(this,0)},e.prototype.moveNode=function(e,t,o){e.parent&&!e.isParentOf(t)&&(e.parent._removeChild(e),o===n.After?t.parent&&t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)+1):o===n.Before?t.parent&&t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)):o===n.Inside&&t.addChildAtPosition(e,0))},e.prototype.getData=function(e){function t(e){return e.map(function(e){var o={};for(var n in e)if(-1===["parent","children","element","tree"].indexOf(n)&&Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];o[n]=r}return e.hasChildren()&&(o.children=t(e.children)),o})}return void 0===e&&(e=!1),t(e?[this]:this.children)},e.prototype.getNodeByName=function(e){return this.getNodeByCallback(function(t){return t.name===e})},e.prototype.getNodeByCallback=function(e){var t=null;return this.iterate(function(o){return!e(o)||(t=o,!1)}),t},e.prototype.addAfter=function(e){if(this.parent){var t=new this.tree.node_class(e),o=this.parent.getChildIndex(this);return this.parent.addChildAtPosition(t,o+1),"object"==typeof e&&e.children&&e.children.length&&t.loadFromData(e.children),t}return null},e.prototype.addBefore=function(e){if(this.parent){var t=new this.tree.node_class(e),o=this.parent.getChildIndex(this);return this.parent.addChildAtPosition(t,o),"object"==typeof e&&e.children&&e.children.length&&t.loadFromData(e.children),t}return null},e.prototype.addParent=function(e){if(this.parent){var t=new this.tree.node_class(e);t._setParent(this.tree);for(var o=this.parent,n=0,r=o.children;n<r.length;n++){var i=r[n];t.addChild(i)}return o.children=[],o.addChild(t),t}return null},e.prototype.remove=function(){this.parent&&(this.parent.removeChild(this),this.parent=null)},e.prototype.append=function(e){var t=new this.tree.node_class(e);return this.addChild(t),"object"==typeof e&&e.children&&e.children.length&&t.loadFromData(e.children),t},e.prototype.prepend=function(e){var t=new this.tree.node_class(e);return this.addChildAtPosition(t,0),"object"==typeof e&&e.children&&e.children.length&&t.loadFromData(e.children),t},e.prototype.isParentOf=function(e){for(var t=e.parent;t;){if(t===this)return!0;t=t.parent}return!1},e.prototype.getLevel=function(){for(var e=0,t=this;t.parent;)e+=1,t=t.parent;return e},e.prototype.getNodeById=function(e){return this.id_mapping[e]},e.prototype.addNodeToIndex=function(e){null!=e.id&&(this.id_mapping[e.id]=e)},e.prototype.removeNodeFromIndex=function(e){null!=e.id&&delete this.id_mapping[e.id]},e.prototype.removeChildren=function(){var e=this;this.iterate(function(t){return e.tree.removeNodeFromIndex(t),!0}),this.children=[]},e.prototype.getPreviousSibling=function(){if(this.parent){var e=this.parent.getChildIndex(this)-1;return e>=0?this.parent.children[e]:null}return null},e.prototype.getNextSibling=function(){if(this.parent){var e=this.parent.getChildIndex(this)+1;return e<this.parent.children.length?this.parent.children[e]:null}return null},e.prototype.getNodesByProperty=function(e,t){return this.filter(function(o){return o[e]===t})},e.prototype.filter=function(e){var t=[];return this.iterate(function(o){return e(o)&&t.push(o),!0}),t},e.prototype.getNextNode=function(e){if(void 0===e&&(e=!0),e&&this.hasChildren()&&this.is_open)return this.children[0];if(this.parent){var t=this.getNextSibling();return t||this.parent.getNextNode(!1)}return null},e.prototype.getPreviousNode=function(){if(this.parent){var e=this.getPreviousSibling();return e?e.hasChildren()&&e.is_open?e.getLastChild():e:this.getParent()}return null},e.prototype.getParent=function(){return this.parent&&this.parent.parent?this.parent:null},e.prototype.getLastChild=function(){if(this.hasChildren()){var e=this.children[this.children.length-1];return e.hasChildren()&&e.is_open?e.getLastChild():e}return null},e.prototype.initFromData=function(e){var t,o=this,n=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=new o.tree.node_class("");i.initFromData(r),o.addChild(i)}};t=e,o.setData(t),t.children&&n(t.children)},e.prototype._setParent=function(e){this.parent=e,this.tree=e.tree,this.tree.addNodeToIndex(this)},e.prototype._removeChild=function(e){this.children.splice(this.getChildIndex(e),1),this.tree.removeNodeFromIndex(e)},e}();t.Node=r},function(e,t,o){"use strict";t.__esModule=!0,t.isInt=function(e){return"number"==typeof e&&e%1==0},t.isFunction=function(e){return"function"==typeof e},t.html_escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},t.getBoolString=function(e){return e?"true":"false"}},function(e,t,o){"use strict";t.__esModule=!0;var n=function(){function e(e,t){this.$el=jQuery(e);var o=this.constructor.defaults;this.options=jQuery.extend({},o,t)}return e.register=function(t,o){var n=function(){return"simple_widget_"+o};function r(t,o){var n=jQuery.data(t,o);return n&&n instanceof e?n:null}jQuery.fn[o]=function(o){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];if(void 0===o||"object"==typeof o)return function(e,o){for(var i=n(),a=0,d=e.get();a<d.length;a++){var l=d[a];if(!r(l,i)){var s=new t(l,o);jQuery.data(l,i)||jQuery.data(l,i,s),s._init()}}return e}(this,o);if("string"==typeof o&&"_"!==o[0]){var d=o;return"destroy"===d?function(e){for(var t=n(),o=0,i=e.get();o<i.length;o++){var a=i[o],d=r(a,t);d&&d.destroy(),jQuery.removeData(a,t)}}(this):"get_widget_class"===d?t:function(t,o,r){for(var i=null,a=0,d=t.get();a<d.length;a++){var l=d[a],s=jQuery.data(l,n());if(s&&s instanceof e){var u=s[o];u&&"function"==typeof u&&(i=u.apply(s,r))}}return i}(this,d,i)}}},e.prototype.destroy=function(){this._deinit()},e.prototype._init=function(){},e.prototype._deinit=function(){},e.defaults={},e}();t.default=n},function(e,t){e.exports=jQuery},function(e,t,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t.__esModule=!0;var i=o(0),a=function(){function e(e,t){this.init(e,t)}return e.prototype.init=function(e,t){this.node=e,this.tree_widget=t,e.element||(e.element=this.tree_widget.element.get(0)),this.$element=jQuery(e.element)},e.prototype.addDropHint=function(e){return this.mustShowBorderDropHint(e)?new l(this.$element,this.tree_widget._getScrollLeft()):new s(this.node,this.$element,e)},e.prototype.select=function(e){var t=this.getLi();t.addClass("jqtree-selected"),t.attr("aria-selected","true");var o=this.getSpan();o.attr("tabindex",this.tree_widget.options.tabIndex),e&&o.focus()},e.prototype.deselect=function(){var e=this.getLi();e.removeClass("jqtree-selected"),e.attr("aria-selected","false");var t=this.getSpan();t.removeAttr("tabindex"),t.blur()},e.prototype.getUl=function(){return this.$element.children("ul:first")},e.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")},e.prototype.getLi=function(){return this.$element},e.prototype.mustShowBorderDropHint=function(e){return e===i.Position.Inside},e}();t.NodeElement=a;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.open=function(e,t,o){var n=this;if(void 0===t&&(t=!0),void 0===o&&(o="fast"),!this.node.is_open){this.node.is_open=!0;var r=this.getButton();r.removeClass("jqtree-closed"),r.html("");var i=r.get(0);if(i){var a=this.tree_widget.renderer.opened_icon_element.cloneNode(!1);i.appendChild(a)}var d=function(){n.getLi().removeClass("jqtree-closed"),n.getSpan().attr("aria-expanded","true"),e&&e(n.node),n.tree_widget._triggerEvent("tree.open",{node:n.node})};t?this.getUl().slideDown(o,d):(this.getUl().show(),d())}},t.prototype.close=function(e,t){var o=this;if(void 0===e&&(e=!0),void 0===t&&(t="fast"),this.node.is_open){this.node.is_open=!1;var n=this.getButton();n.addClass("jqtree-closed"),n.html("");var r=n.get(0);if(r){var i=this.tree_widget.renderer.closed_icon_element.cloneNode(!1);r.appendChild(i)}var a=function(){o.getLi().addClass("jqtree-closed"),o.getSpan().attr("aria-expanded","false"),o.tree_widget._triggerEvent("tree.close",{node:o.node})};e?this.getUl().slideUp(t,a):(this.getUl().hide(),a())}},t.prototype.mustShowBorderDropHint=function(e){return!this.node.is_open&&e===i.Position.Inside},t.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")},t}(a);t.FolderElement=d;var l=function(){function e(e,t){var o=e.children(".jqtree-element"),n=e.width()||0,r=Math.max(n+t-4,0),i=o.outerHeight()||0,a=Math.max(i-4,0);this.$hint=jQuery('<span class="jqtree-border"></span>'),o.append(this.$hint),this.$hint.css({width:r,height:a})}return e.prototype.remove=function(){this.$hint.remove()},e}();t.BorderDropHint=l;var s=function(){function e(e,t,o){this.$element=t,this.node=e,this.$ghost=jQuery('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span>\n            <span class="jqtree_common jqtree-line"></span></li>'),o===i.Position.After?this.moveAfter():o===i.Position.Before?this.moveBefore():o===i.Position.Inside&&(e.isFolder()&&e.is_open?this.moveInsideOpenFolder():this.moveInside())}return e.prototype.remove=function(){this.$ghost.remove()},e.prototype.moveAfter=function(){this.$element.after(this.$ghost)},e.prototype.moveBefore=function(){this.$element.before(this.$ghost)},e.prototype.moveInsideOpenFolder=function(){jQuery(this.node.children[0].element).before(this.$ghost)},e.prototype.moveInside=function(){this.$element.after(this.$ghost),this.$ghost.addClass("jqtree-inside")},e}()},function(e,t,o){"use strict";t.__esModule=!0;var n=function(){function e(e){this.tree_widget=e,this.clear()}return e.prototype.getSelectedNode=function(){var e=this.getSelectedNodes();return!!e.length&&e[0]},e.prototype.getSelectedNodes=function(){if(this.selected_single_node)return[this.selected_single_node];var e=[];for(var t in this.selected_nodes)if(this.selected_nodes.hasOwnProperty(t)){var o=this.tree_widget.getNodeById(t);o&&e.push(o)}return e},e.prototype.getSelectedNodesUnder=function(e){if(this.selected_single_node)return e.isParentOf(this.selected_single_node)?[this.selected_single_node]:[];var t=[];for(var o in this.selected_nodes)if(this.selected_nodes.hasOwnProperty(o)){var n=this.tree_widget.getNodeById(o);n&&e.isParentOf(n)&&t.push(n)}return t},e.prototype.isNodeSelected=function(e){return!!e&&(null!=e.id?!!this.selected_nodes[e.id]:!!this.selected_single_node&&this.selected_single_node.element===e.element)},e.prototype.clear=function(){this.selected_nodes={},this.selected_single_node=null},e.prototype.removeFromSelection=function(e,t){var o=this;void 0===t&&(t=!1),null==e.id?this.selected_single_node&&e.element===this.selected_single_node.element&&(this.selected_single_node=null):(delete this.selected_nodes[e.id],t&&e.iterate(function(){return delete o.selected_nodes[e.id],!0}))},e.prototype.addToSelection=function(e){null!=e.id?this.selected_nodes[e.id]=!0:this.selected_single_node=e},e}();t.default=n},function(e,t,o){"use strict";t.__esModule=!0;var n=function(){function e(e){this.tree_widget=e,this.previous_top=-1,this.is_initialized=!1}return e.prototype.checkScrolling=function(){this.ensureInit(),this.checkVerticalScrolling(),this.checkHorizontalScrolling()},e.prototype.scrollToY=function(e){if(this.ensureInit(),this.$scroll_parent)this.$scroll_parent[0].scrollTop=e;else{var t=this.tree_widget.$el.offset(),o=t?t.top:0;jQuery(document).scrollTop(e+o)}},e.prototype.isScrolledIntoView=function(e){var t,o,n,r;this.ensureInit();var i,a=e.height()||0;this.$scroll_parent?(r=0,o=this.$scroll_parent.height()||0,t=(n=((i=e.offset())?i.top:0)-this.scroll_parent_top)+a):(o=(r=jQuery(window).scrollTop()||0)+(jQuery(window).height()||0),t=(n=(i=e.offset())?i.top:0)+a);return t<=o&&n>=r},e.prototype.getScrollLeft=function(){return this.$scroll_parent&&this.$scroll_parent.scrollLeft()||0},e.prototype.initScrollParent=function(){var e=this,t=function(){e.scroll_parent_top=0,e.$scroll_parent=null};"fixed"===this.tree_widget.$el.css("position")&&t();var o=function(){var t=["overflow","overflow-y"],o=function(e){for(var o=0,n=t;o<n.length;o++){var r=n[o],i=e.css(r);if("auto"===i||"scroll"===i)return!0}return!1};if(o(e.tree_widget.$el))return e.tree_widget.$el;for(var n=0,r=e.tree_widget.$el.parents().get();n<r.length;n++){var i=r[n],a=jQuery(i);if(o(a))return a}return null}();if(o&&o.length&&"HTML"!==o[0].tagName){this.$scroll_parent=o;var n=this.$scroll_parent.offset();this.scroll_parent_top=n?n.top:0}else t();this.is_initialized=!0},e.prototype.ensureInit=function(){this.is_initialized||this.initScrollParent()},e.prototype.handleVerticalScrollingWithScrollParent=function(e){var t=this.$scroll_parent&&this.$scroll_parent[0];t&&(this.scroll_parent_top+t.offsetHeight-e.bottom<20?(t.scrollTop+=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1):e.top-this.scroll_parent_top<20&&(t.scrollTop-=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1))},e.prototype.handleVerticalScrollingWithDocument=function(e){var t=jQuery(document).scrollTop()||0;e.top-t<20?jQuery(document).scrollTop(t-20):(jQuery(window).height()||0)-(e.bottom-t)<20&&jQuery(document).scrollTop(t+20)},e.prototype.checkVerticalScrolling=function(){var e=this.tree_widget.dnd_handler&&this.tree_widget.dnd_handler.hovered_area;e&&e.top!==this.previous_top&&(this.previous_top=e.top,this.$scroll_parent?this.handleVerticalScrollingWithScrollParent(e):this.handleVerticalScrollingWithDocument(e))},e.prototype.checkHorizontalScrolling=function(){var e=this.tree_widget.dnd_handler&&this.tree_widget.dnd_handler.position_info;e&&(this.$scroll_parent?this.handleHorizontalScrollingWithParent(e):this.handleHorizontalScrollingWithDocument(e))},e.prototype.handleHorizontalScrollingWithParent=function(e){var t=this.$scroll_parent,o=t&&t.offset();if(t&&o){var n=t[0],r=n.scrollLeft+n.clientWidth<n.scrollWidth,i=n.scrollLeft>0,a=o.left+n.clientWidth,d=o.left,l=e.page_x>a-20,s=e.page_x<d+20;l&&r?n.scrollLeft=Math.min(n.scrollLeft+20,n.scrollWidth):s&&i&&(n.scrollLeft=Math.max(n.scrollLeft-20,0))}},e.prototype.handleHorizontalScrollingWithDocument=function(e){var t=jQuery(document),o=t.scrollLeft()||0,n=jQuery(window).width()||0,r=o>0,i=e.page_x>n-20,a=e.page_x-o<20;i?t.scrollLeft(o+20):a&&r&&t.scrollLeft(Math.max(o-20,0))},e}();t.default=n},function(e,t,o){"use strict";t.__esModule=!0;var n=o(1),r=function(){function e(e){this.tree_widget=e}return e.prototype.saveState=function(){var e=JSON.stringify(this.getState());this.tree_widget.options.onSetStateFromStorage?this.tree_widget.options.onSetStateFromStorage(e):this.supportsLocalStorage()&&localStorage.setItem(this.getKeyName(),e)},e.prototype.getStateFromStorage=function(){var e=this._loadFromStorage();return e?this._parseState(e):null},e.prototype.getState=function(){var e,t=this;return{open_nodes:(e=[],t.tree_widget.tree.iterate(function(t){return t.is_open&&t.id&&t.hasChildren()&&e.push(t.id),!0}),e),selected_node:t.tree_widget.getSelectedNodes().map(function(e){return e.id})}},e.prototype.setInitialState=function(e){if(e){var t=!1;return e.open_nodes&&(t=this._openInitialNodes(e.open_nodes)),e.selected_node&&(this._resetSelection(),this._selectInitialNodes(e.selected_node)),t}return!1},e.prototype.setInitialStateOnDemand=function(e,t){e?this._setInitialStateOnDemand(e.open_nodes,e.selected_node,t):t()},e.prototype.getNodeIdToBeSelected=function(){var e=this.getStateFromStorage();return e&&e.selected_node?e.selected_node[0]:null},e.prototype._parseState=function(e){var t=jQuery.parseJSON(e);return t&&t.selected_node&&n.isInt(t.selected_node)&&(t.selected_node=[t.selected_node]),t},e.prototype._loadFromStorage=function(){return this.tree_widget.options.onGetStateFromStorage?this.tree_widget.options.onGetStateFromStorage():this.supportsLocalStorage()?localStorage.getItem(this.getKeyName()):void 0},e.prototype._openInitialNodes=function(e){for(var t=!1,o=0,n=e;o<n.length;o++){var r=n[o],i=this.tree_widget.getNodeById(r);i&&(i.load_on_demand?t=!0:i.is_open=!0)}return t},e.prototype._selectInitialNodes=function(e){for(var t=0,o=0,n=e;o<n.length;o++){var r=n[o],i=this.tree_widget.getNodeById(r);i&&(t+=1,this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.addToSelection(i))}return 0!==t},e.prototype._resetSelection=function(){var e=this.tree_widget.select_node_handler;e&&e.getSelectedNodes().forEach(function(t){e.removeFromSelection(t)})},e.prototype._setInitialStateOnDemand=function(e,t,o){var n=this,r=0,i=e,a=function(){for(var e=[],a=0,l=i;a<l.length;a++){var s=l[a],u=n.tree_widget.getNodeById(s);u?u.is_loading||(u.load_on_demand?d(u):n.tree_widget._openNode(u,!1,null)):e.push(s)}i=e,n._selectInitialNodes(t)&&n.tree_widget._refreshElements(null),0===r&&o()},d=function(e){r+=1,n.tree_widget._openNode(e,!1,function(){r-=1,a()})};a()},e.prototype.getKeyName=function(){return"string"==typeof this.tree_widget.options.saveState?this.tree_widget.options.saveState:"tree"},e.prototype.supportsLocalStorage=function(){return null==this._supportsLocalStorage&&(this._supportsLocalStorage=function(){if(null==localStorage)return!1;try{var e="_storage_test";sessionStorage.setItem(e,"value"),sessionStorage.removeItem(e)}catch(e){return!1}return!0}()),this._supportsLocalStorage},e}();t.default=r},function(e,t,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t.__esModule=!0;var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mouseDown=function(e){if(1===e.which){var o=t._handleMouseDown(t._getPositionInfo(e));return o&&e.preventDefault(),o}},t.mouseMove=function(e){return t._handleMouseMove(e,t._getPositionInfo(e))},t.mouseUp=function(e){return t._handleMouseUp(t._getPositionInfo(e))},t.touchStart=function(e){var o=e.originalEvent;if(!(o.touches.length>1)){var n=o.changedTouches[0];return t._handleMouseDown(t._getPositionInfo(n))}},t.touchMove=function(e){var o=e.originalEvent;if(!(o.touches.length>1)){var n=o.changedTouches[0];return t._handleMouseMove(e,t._getPositionInfo(n))}},t.touchEnd=function(e){var o=e.originalEvent;if(!(o.touches.length>1)){var n=o.changedTouches[0];return t._handleMouseUp(t._getPositionInfo(n))}},t}return r(t,e),t.prototype.setMouseDelay=function(e){this.mouse_delay=e},t.prototype._init=function(){this.$el.on("mousedown.mousewidget",this.mouseDown),this.$el.on("touchstart.mousewidget",this.touchStart),this.is_mouse_started=!1,this.mouse_delay=0,this._mouse_delay_timer=null,this._is_mouse_delay_met=!0,this.mouse_down_info=null},t.prototype._deinit=function(){this.$el.off("mousedown.mousewidget"),this.$el.off("touchstart.mousewidget");var e=jQuery(document);e.off("mousemove.mousewidget"),e.off("mouseup.mousewidget")},t.prototype._handleMouseDown=function(e){if(this.is_mouse_started&&this._handleMouseUp(e),this.mouse_down_info=e,this._mouseCapture(e))return this._handleStartMouse(),!0},t.prototype._handleStartMouse=function(){var e=jQuery(document);e.on("mousemove.mousewidget",this.mouseMove),e.on("touchmove.mousewidget",this.touchMove),e.on("mouseup.mousewidget",this.mouseUp),e.on("touchend.mousewidget",this.touchEnd),this.mouse_delay&&this._startMouseDelayTimer()},t.prototype._startMouseDelayTimer=function(){var e=this;this._mouse_delay_timer&&clearTimeout(this._mouse_delay_timer),this._mouse_delay_timer=setTimeout(function(){e._is_mouse_delay_met=!0},this.mouse_delay),this._is_mouse_delay_met=!1},t.prototype._handleMouseMove=function(e,t){return this.is_mouse_started?(this._mouseDrag(t),e.preventDefault()):!(!this.mouse_delay||this._is_mouse_delay_met)||(this.mouse_down_info&&(this.is_mouse_started=!1!==this._mouseStart(this.mouse_down_info)),this.is_mouse_started?this._mouseDrag(t):this._handleMouseUp(t),!this.is_mouse_started)},t.prototype._getPositionInfo=function(e){return{page_x:e.pageX,page_y:e.pageY,target:e.target,original_event:e}},t.prototype._handleMouseUp=function(e){var t=jQuery(document);t.off("mousemove.mousewidget"),t.off("touchmove.mousewidget"),t.off("mouseup.mousewidget"),t.off("touchend.mousewidget"),this.is_mouse_started&&(this.is_mouse_started=!1,this._mouseStop(e))},t}(o(2).default);t.default=i},function(e,t,o){"use strict";t.__esModule=!0;var n=function(){function e(t){var o=this;this.handleKeyDown=function(t){if(!o.canHandleKeyboard())return!0;switch(t.which){case e.DOWN:return o.moveDown();case e.UP:return o.moveUp();case e.RIGHT:return o.moveRight();case e.LEFT:return o.moveLeft();default:return!0}},this.tree_widget=t,t.options.keyboardSupport&&jQuery(document).on("keydown.jqtree",this.handleKeyDown)}return e.prototype.deinit=function(){jQuery(document).off("keydown.jqtree")},e.prototype.moveDown=function(){var e=this.tree_widget.getSelectedNode();return!!e&&this.selectNode(e.getNextNode())},e.prototype.moveUp=function(){var e=this.tree_widget.getSelectedNode();return!!e&&this.selectNode(e.getPreviousNode())},e.prototype.moveRight=function(){var e=this.tree_widget.getSelectedNode();return!e||(!e.isFolder()||(e.is_open?this.selectNode(e.getNextNode()):(this.tree_widget.openNode(e),!1)))},e.prototype.moveLeft=function(){var e=this.tree_widget.getSelectedNode();return!e||(e.isFolder()&&e.is_open?(this.tree_widget.closeNode(e),!1):this.selectNode(e.getParent()))},e.prototype.selectNode=function(e){return!e||(this.tree_widget.selectNode(e),this.tree_widget.scroll_handler&&!this.tree_widget.scroll_handler.isScrolledIntoView(jQuery(e.element).find(".jqtree-element"))&&this.tree_widget.scrollToNode(e),!1)},e.prototype.canHandleKeyboard=function(){return this.tree_widget.options.keyboardSupport&&this.isFocusOnTree()&&null!=this.tree_widget.getSelectedNode()},e.prototype.isFocusOnTree=function(){var e=document.activeElement;return e&&"SPAN"===e.tagName&&this.tree_widget._containsElement(e)},e.LEFT=37,e.UP=38,e.RIGHT=39,e.DOWN=40,e}();t.default=n},function(e,t,o){"use strict";t.__esModule=!0;var n=o(1),r=function(){function e(e){this.tree_widget=e,this.opened_icon_element=this.createButtonElement(e.options.openedIcon),this.closed_icon_element=this.createButtonElement(e.options.closedIcon)}return e.prototype.render=function(e){e&&e.parent?this.renderFromNode(e):this.renderFromRoot()},e.prototype.renderFromRoot=function(){var e=this.tree_widget.element;e.empty(),this.createDomElements(e[0],this.tree_widget.tree.children,!0,1)},e.prototype.renderFromNode=function(e){var t=jQuery(e.element),o=this.createLi(e,e.getLevel());this.attachNodeData(e,o),t.after(o),t.remove(),e.children&&this.createDomElements(o,e.children,!1,e.getLevel()+1)},e.prototype.createDomElements=function(e,t,o,n){var r=this.createUl(o);e.appendChild(r);for(var i=0,a=t;i<a.length;i++){var d=a[i],l=this.createLi(d,n);r.appendChild(l),this.attachNodeData(d,l),d.hasChildren()&&this.createDomElements(l,d.children,!1,n+1)}},e.prototype.attachNodeData=function(e,t){e.element=t,jQuery(t).data("node",e)},e.prototype.createUl=function(e){var t,o;e?(t="jqtree-tree",o="tree",this.tree_widget.options.rtl&&(t+=" jqtree-rtl")):(t="",o="group");var n=document.createElement("ul");return n.className="jqtree_common "+t,n.setAttribute("role",o),n},e.prototype.createLi=function(e,t){var o=Boolean(this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(e)),n=e.isFolder()?this.createFolderLi(e,t,o):this.createNodeLi(e,t,o);return this.tree_widget.options.onCreateLi&&this.tree_widget.options.onCreateLi(e,jQuery(n),o),n},e.prototype.createFolderLi=function(e,t,o){var n=this.getButtonClasses(e),r=this.getFolderClasses(e,o),i=e.is_open?this.opened_icon_element:this.closed_icon_element,a=document.createElement("li");a.className="jqtree_common "+r,a.setAttribute("role","presentation");var d=document.createElement("div");d.className="jqtree-element jqtree_common",d.setAttribute("role","presentation"),a.appendChild(d);var l=document.createElement("a");return l.className=n,l.appendChild(i.cloneNode(!0)),l.setAttribute("role","presentation"),l.setAttribute("aria-hidden","true"),this.tree_widget.options.buttonLeft&&d.appendChild(l),d.appendChild(this.createTitleSpan(e.name,t,o,e.is_open,!0)),this.tree_widget.options.buttonLeft||d.appendChild(l),a},e.prototype.createNodeLi=function(e,t,o){var n=["jqtree_common"];o&&n.push("jqtree-selected");var r=n.join(" "),i=document.createElement("li");i.className=r,i.setAttribute("role","presentation");var a=document.createElement("div");return a.className="jqtree-element jqtree_common",a.setAttribute("role","presentation"),i.appendChild(a),a.appendChild(this.createTitleSpan(e.name,t,o,e.is_open,!1)),i},e.prototype.createTitleSpan=function(e,t,o,r,i){var a=document.createElement("span"),d="jqtree-title jqtree_common";return i&&(d+=" jqtree-title-folder"),a.className=d,a.setAttribute("role","treeitem"),a.setAttribute("aria-level",""+t),a.setAttribute("aria-selected",n.getBoolString(o)),a.setAttribute("aria-expanded",n.getBoolString(r)),o&&a.setAttribute("tabindex",this.tree_widget.options.tabIndex),a.innerHTML=this.escapeIfNecessary(e),a},e.prototype.getButtonClasses=function(e){var t=["jqtree-toggler","jqtree_common"];return e.is_open||t.push("jqtree-closed"),this.tree_widget.options.buttonLeft?t.push("jqtree-toggler-left"):t.push("jqtree-toggler-right"),t.join(" ")},e.prototype.getFolderClasses=function(e,t){var o=["jqtree-folder"];return e.is_open||o.push("jqtree-closed"),t&&o.push("jqtree-selected"),e.is_loading&&o.push("jqtree-loading"),o.join(" ")},e.prototype.escapeIfNecessary=function(e){return this.tree_widget.options.autoEscape?n.html_escape(e):e},e.prototype.createButtonElement=function(e){if("string"==typeof e){var t=document.createElement("div");return t.innerHTML=e,document.createTextNode(t.innerHTML)}return jQuery(e)[0]},e}();t.default=r},function(e,t,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t.__esModule=!0;var i=o(3),a=o(0),d=o(1),l=function(){function e(e){this.tree_widget=e,this.hovered_area=null,this.hit_areas=[],this.is_dragging=!1,this.current_item=null,this.position_info=null}return e.prototype.mouseCapture=function(e){var t=i(e.target);if(!this.mustCaptureElement(t))return null;if(this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(t))return null;var o=this.tree_widget._getNodeElement(t);return o&&this.tree_widget.options.onCanMove&&(this.tree_widget.options.onCanMove(o.node)||(o=null)),this.current_item=o,null!=this.current_item},e.prototype.generateHitAreas=function(){if(this.current_item){var e=new s(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom);this.hit_areas=e.generate()}else this.hit_areas=[]},e.prototype.mouseStart=function(e){if(this.current_item){this.refresh();var t=i(e.target).offset(),o=t?t.left:0,n=t?t.top:0,r=this.current_item.node,a=this.tree_widget.options.autoEscape?d.html_escape(r.name):r.name;return this.drag_element=new u(a,e.page_x-o,e.page_y-n,this.tree_widget.element),this.is_dragging=!0,this.position_info=e,this.current_item.$element.addClass("jqtree-moving"),!0}return!1},e.prototype.mouseDrag=function(e){if(this.current_item&&this.drag_element){this.drag_element.move(e.page_x,e.page_y),this.position_info=e;var t=this.findHoveredArea(e.page_x,e.page_y);return this.canMoveToArea(t)&&t?(t.node.isFolder()||this.stopOpenFolderTimer(),this.hovered_area!==t&&(this.hovered_area=t,this.mustOpenFolderTimer(t)?this.startOpenFolderTimer(t.node):this.stopOpenFolderTimer(),this.updateDropHint())):(this.removeHover(),this.removeDropHint(),this.stopOpenFolderTimer()),t||this.tree_widget.options.onDragMove&&this.tree_widget.options.onDragMove(this.current_item.node,e.original_event),!0}return!1},e.prototype.mouseStop=function(e){this.moveItem(e),this.clear(),this.removeHover(),this.removeDropHint(),this.removeHitAreas();var t=this.current_item;return this.current_item&&(this.current_item.$element.removeClass("jqtree-moving"),this.current_item=null),this.is_dragging=!1,this.position_info=null,!this.hovered_area&&t&&this.tree_widget.options.onDragStop&&this.tree_widget.options.onDragStop(t.node,e.original_event),!1},e.prototype.refresh=function(){this.removeHitAreas(),this.current_item&&(this.generateHitAreas(),this.current_item=this.tree_widget._getNodeElementForNode(this.current_item.node),this.is_dragging&&this.current_item.$element.addClass("jqtree-moving"))},e.prototype.mustCaptureElement=function(e){return!e.is("input,select,textarea")},e.prototype.canMoveToArea=function(e){if(e&&this.current_item){if(this.tree_widget.options.onCanMoveTo){var t=a.getPositionName(e.position);return this.tree_widget.options.onCanMoveTo(this.current_item.node,e.node,t)}return!0}return!1},e.prototype.removeHitAreas=function(){this.hit_areas=[]},e.prototype.clear=function(){this.drag_element&&(this.drag_element.remove(),this.drag_element=null)},e.prototype.removeDropHint=function(){this.previous_ghost&&this.previous_ghost.remove()},e.prototype.removeHover=function(){this.hovered_area=null},e.prototype.findHoveredArea=function(e,t){var o=this.getTreeDimensions();if(e<o.left||t<o.top||e>o.right||t>o.bottom)return null;for(var n=0,r=this.hit_areas.length;n<r;){var i=n+r>>1,a=this.hit_areas[i];if(t<a.top)r=i;else{if(!(t>a.bottom))return a;n=i+1}}return null},e.prototype.mustOpenFolderTimer=function(e){var t=e.node;return t.isFolder()&&!t.is_open&&e.position===a.Position.Inside},e.prototype.updateDropHint=function(){if(this.hovered_area){this.removeDropHint();var e=this.tree_widget._getNodeElementForNode(this.hovered_area.node);this.previous_ghost=e.addDropHint(this.hovered_area.position)}},e.prototype.startOpenFolderTimer=function(e){var t=this;this.stopOpenFolderTimer(),this.open_folder_timer=setTimeout(function(){t.tree_widget._openNode(e,t.tree_widget.options.slide,function(){t.refresh(),t.updateDropHint()})},this.tree_widget.options.openFolderDelay)},e.prototype.stopOpenFolderTimer=function(){this.open_folder_timer&&(clearTimeout(this.open_folder_timer),this.open_folder_timer=null)},e.prototype.moveItem=function(e){var t=this;if(this.current_item&&this.hovered_area&&this.hovered_area.position!==a.Position.None&&this.canMoveToArea(this.hovered_area)){var o=this.current_item.node,n=this.hovered_area.node,r=this.hovered_area.position,i=o.parent;r===a.Position.Inside&&(this.hovered_area.node.is_open=!0);var d=function(){t.tree_widget.tree.moveNode(o,n,r),t.tree_widget.element.empty(),t.tree_widget._refreshElements(null)};this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:o,target_node:n,position:a.getPositionName(r),previous_parent:i,do_move:d,original_event:e.original_event}}).isDefaultPrevented()||d()}},e.prototype.getTreeDimensions=function(){var e=this.tree_widget.element.offset();if(e){var t=this.tree_widget.element,o=t.width()||0,n=t.height()||0,r=e.left+this.tree_widget._getScrollLeft();return{left:r,top:e.top,right:r+o,bottom:e.top+n+16}}return{left:0,top:0,right:0,bottom:0}},e}();t.DragAndDropHandler=l;var s=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.current_node=o,r.tree_bottom=n,r}return r(t,e),t.prototype.generate=function(){return this.positions=[],this.last_top=0,this.iterate(),this.generateHitAreas(this.positions)},t.prototype.generateHitAreas=function(e){for(var t=-1,o=[],n=[],r=0,i=e;r<i.length;r++){var a=i[r];a.top!==t&&o.length&&(o.length&&this.generateHitAreasForGroup(n,o,t,a.top),t=a.top,o=[]),o.push(a)}return this.generateHitAreasForGroup(n,o,t,this.tree_bottom),n},t.prototype.handleOpenFolder=function(e,t){return e!==this.current_node&&(e.children[0]!==this.current_node&&this.addPosition(e,a.Position.Inside,this.getTop(t)),!0)},t.prototype.handleClosedFolder=function(e,t,o){var n=this.getTop(o);e===this.current_node?this.addPosition(e,a.Position.None,n):(this.addPosition(e,a.Position.Inside,n),t!==this.current_node&&this.addPosition(e,a.Position.After,n))},t.prototype.handleFirstNode=function(e){e!==this.current_node&&this.addPosition(e,a.Position.Before,this.getTop(i(e.element)))},t.prototype.handleAfterOpenFolder=function(e,t){e===this.current_node||t===this.current_node?this.addPosition(e,a.Position.None,this.last_top):this.addPosition(e,a.Position.After,this.last_top)},t.prototype.handleNode=function(e,t,o){var n=this.getTop(o);e===this.current_node?this.addPosition(e,a.Position.None,n):this.addPosition(e,a.Position.Inside,n),t===this.current_node||e===this.current_node?this.addPosition(e,a.Position.None,n):this.addPosition(e,a.Position.After,n)},t.prototype.getTop=function(e){var t=e.offset();return t?t.top:0},t.prototype.addPosition=function(e,t,o){var n={top:o,bottom:0,node:e,position:t};this.positions.push(n),this.last_top=o},t.prototype.generateHitAreasForGroup=function(e,t,o,n){for(var r=Math.min(t.length,4),i=Math.round((n-o)/r),a=o,d=0;d<r;){var l=t[d];e.push({top:a,bottom:a+i,node:l.node,position:l.position}),a+=i,d+=1}},t}(function(){function e(e){this.tree=e}return e.prototype.iterate=function(){var e=this,t=!0,o=function(n,r){var a=(n.is_open||!n.element)&&n.hasChildren(),d=null;if(n.element){if(!(d=i(n.element)).is(":visible"))return;t&&(e.handleFirstNode(n),t=!1),n.hasChildren()?n.is_open?e.handleOpenFolder(n,d)||(a=!1):e.handleClosedFolder(n,r,d):e.handleNode(n,r,d)}if(a){var l=n.children.length;n.children.forEach(function(e,t){o(n.children[t],t===l-1?null:n.children[t+1])}),n.is_open&&d&&e.handleAfterOpenFolder(n,r)}};o(this.tree,null)},e}());t.HitAreasGenerator=s;var u=function(){function e(e,t,o,n){this.offset_x=t,this.offset_y=o,this.$element=i('<span class="jqtree-title jqtree-dragging">'+e+"</span>"),this.$element.css("position","absolute"),n.append(this.$element)}return e.prototype.move=function(e,t){this.$element.offset({left:e-this.offset_x,top:t-this.offset_y})},e.prototype.remove=function(){this.$element.remove()},e}()},function(e,t,o){"use strict";t.__esModule=!0;t.default="1.4.4"},function(e,t,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});t.__esModule=!0;var i=o(12),a=o(3),d=o(11),l=o(10),s=o(9),u=o(8),c=o(7),h=o(6),p=o(5),f=o(2),_=o(0),m=o(1),g=o(4),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleClick=function(e){var o=t._getClickTarget(e.target);if(o)if("button"===o.type)t.toggle(o.node,t.options.slide),e.preventDefault(),e.stopPropagation();else if("label"===o.type){var n=o.node;t._triggerEvent("tree.click",{node:n,click_event:e}).isDefaultPrevented()||t._selectNode(n,!0)}},t._handleDblclick=function(e){var o=t._getClickTarget(e.target);o&&"label"===o.type&&t._triggerEvent("tree.dblclick",{node:o.node,click_event:e})},t._handleContextmenu=function(e){var o=a(e.target).closest("ul.jqtree-tree .jqtree-element");if(o.length){var n=t._getNode(o);if(n)return e.preventDefault(),e.stopPropagation(),t._triggerEvent("tree.contextmenu",{node:n,click_event:e}),!1}return null},t}return r(t,e),t.prototype.toggle=function(e,t){var o=null==t?this.options.slide:t;return e.is_open?this.closeNode(e,o):this.openNode(e,o),this.element},t.prototype.getTree=function(){return this.tree},t.prototype.selectNode=function(e){return this._selectNode(e,!1),this.element},t.prototype.getSelectedNode=function(){return!!this.select_node_handler&&this.select_node_handler.getSelectedNode()},t.prototype.toJson=function(){return JSON.stringify(this.tree.getData())},t.prototype.loadData=function(e,t){return this._loadData(e,t),this.element},t.prototype.loadDataFromUrl=function(e,t,o){return"string"==typeof e?this._loadDataFromUrl(e,t,o):this._loadDataFromUrl(null,e,t),this.element},t.prototype.reload=function(e){return this._loadDataFromUrl(null,null,e),this.element},t.prototype.getNodeById=function(e){return this.tree.getNodeById(e)},t.prototype.getNodeByName=function(e){return this.tree.getNodeByName(e)},t.prototype.getNodesByProperty=function(e,t){return this.tree.getNodesByProperty(e,t)},t.prototype.getNodeByHtmlElement=function(e){return this._getNode(a(e))},t.prototype.getNodeByCallback=function(e){return this.tree.getNodeByCallback(e)},t.prototype.openNode=function(e,t,o){var n=this,r=function(){var e,r;return m.isFunction(t)?(e=t,r=null):(r=t,e=o),null==r&&(r=n.options.slide),[r,e]}(),i=r[0],a=r[1];return e&&this._openNode(e,i,a),this.element},t.prototype.closeNode=function(e,t){var o=null==t?this.options.slide:t;return e.isFolder()&&(new g.FolderElement(e,this).close(o,this.options.animationSpeed),this._saveState()),this.element},t.prototype.isDragging=function(){return!!this.dnd_handler&&this.dnd_handler.is_dragging},t.prototype.refreshHitAreas=function(){return this.dnd_handler&&this.dnd_handler.refresh(),this.element},t.prototype.addNodeAfter=function(e,t){var o=t.addAfter(e);return o&&this._refreshElements(t.parent),o},t.prototype.addNodeBefore=function(e,t){var o=t.addBefore(e);return o&&this._refreshElements(t.parent),o},t.prototype.addParentNode=function(e,t){var o=t.addParent(e);return o&&this._refreshElements(o.parent),o},t.prototype.removeNode=function(e){return e.parent&&this.select_node_handler&&(this.select_node_handler.removeFromSelection(e,!0),e.remove(),this._refreshElements(e.parent)),this.element},t.prototype.appendNode=function(e,t){var o=t||this.tree,n=o.append(e);return this._refreshElements(o),n},t.prototype.prependNode=function(e,t){var o=t||this.tree,n=o.prepend(e);return this._refreshElements(o),n},t.prototype.updateNode=function(e,t){var o=t.id&&t.id!==e.id;return o&&this.tree.removeNodeFromIndex(e),e.setData(t),o&&this.tree.addNodeToIndex(e),"object"==typeof t&&t.children&&(e.removeChildren(),t.children.length&&e.loadFromData(t.children)),this.renderer.renderFromNode(e),this._selectCurrentNode(),this.element},t.prototype.moveNode=function(e,t,o){var n=_.getPosition(o);return this.tree.moveNode(e,t,n),this._refreshElements(null),this.element},t.prototype.getStateFromStorage=function(){if(this.save_state_handler)return this.save_state_handler.getStateFromStorage()},t.prototype.addToSelection=function(e,t){return void 0===t&&(t=!0),e&&this.select_node_handler&&(this.select_node_handler.addToSelection(e),this._getNodeElementForNode(e).select(t),this._saveState()),this.element},t.prototype.getSelectedNodes=function(){return this.select_node_handler?this.select_node_handler.getSelectedNodes():[]},t.prototype.isNodeSelected=function(e){return!!this.select_node_handler&&this.select_node_handler.isNodeSelected(e)},t.prototype.removeFromSelection=function(e){return this.select_node_handler&&(this.select_node_handler.removeFromSelection(e),this._getNodeElementForNode(e).deselect(),this._saveState()),this.element},t.prototype.scrollToNode=function(e){if(this.scroll_handler){var t=a(e.element).offset(),o=t?t.top:0,n=this.$el.offset(),r=o-(n?n.top:0);this.scroll_handler.scrollToY(r)}return this.element},t.prototype.getState=function(){if(this.save_state_handler)return this.save_state_handler.getState()},t.prototype.setState=function(e){return this.save_state_handler&&(this.save_state_handler.setInitialState(e),this._refreshElements(null)),this.element},t.prototype.setOption=function(e,t){return this.options[e]=t,this.element},t.prototype.moveDown=function(){return this.key_handler&&this.key_handler.moveDown(),this.element},t.prototype.moveUp=function(){return this.key_handler&&this.key_handler.moveUp(),this.element},t.prototype.getVersion=function(){return i.default},t.prototype.testGenerateHitAreas=function(e){return this.dnd_handler?(this.dnd_handler.current_item=this._getNodeElementForNode(e),this.dnd_handler.generateHitAreas(),this.dnd_handler.hit_areas):[]},t.prototype._triggerEvent=function(e,t){var o=a.Event(e);return a.extend(o,t),this.element.trigger(o),o},t.prototype._openNode=function(e,t,o){var n=this;void 0===t&&(t=!0);var r=function(e,t,o){new g.FolderElement(e,n).open(o,t,n.options.animationSpeed)};if(e.isFolder())if(e.load_on_demand)this._loadFolderOnDemand(e,t,o);else{for(var i=e.parent;i;)i.parent&&r(i,!1,null),i=i.parent;r(e,t,o),this._saveState()}},t.prototype._refreshElements=function(e){this.renderer.render(e),this._triggerEvent("tree.refresh")},t.prototype._getNodeElementForNode=function(e){return e.isFolder()?new g.FolderElement(e,this):new g.NodeElement(e,this)},t.prototype._getNodeElement=function(e){var t=this._getNode(e);return t?this._getNodeElementForNode(t):null},t.prototype._containsElement=function(e){var t=this._getNode(a(e));return null!=t&&t.tree===this.tree},t.prototype._getScrollLeft=function(){return this.scroll_handler&&this.scroll_handler.getScrollLeft()||0},t.prototype._init=function(){e.prototype._init.call(this),this.element=this.$el,this.mouse_delay=300,this.is_initialized=!1,this.options.rtl=this._getRtlOption(),null===this.options.closedIcon&&(this.options.closedIcon=this._getDefaultClosedIcon()),this.renderer=new l.default(this),null!=c.default?this.save_state_handler=new c.default(this):this.options.saveState=!1,null!=p.default&&(this.select_node_handler=new p.default(this)),null!=d.DragAndDropHandler?this.dnd_handler=new d.DragAndDropHandler(this):this.options.dragAndDrop=!1,null!=h.default&&(this.scroll_handler=new h.default(this)),null!=s.default&&null!=p.default&&(this.key_handler=new s.default(this)),this._initData(),this.element.click(this._handleClick),this.element.dblclick(this._handleDblclick),this.options.useContextMenu&&this.element.on("contextmenu",this._handleContextmenu)},t.prototype._deinit=function(){this.element.empty(),this.element.off(),this.key_handler&&this.key_handler.deinit(),this.tree=new _.Node({},!0),e.prototype._deinit.call(this)},t.prototype._mouseCapture=function(e){return!(!this.options.dragAndDrop||!this.dnd_handler)&&this.dnd_handler.mouseCapture(e)},t.prototype._mouseStart=function(e){return!(!this.options.dragAndDrop||!this.dnd_handler)&&this.dnd_handler.mouseStart(e)},t.prototype._mouseDrag=function(e){if(this.options.dragAndDrop&&this.dnd_handler){var t=this.dnd_handler.mouseDrag(e);return this.scroll_handler&&this.scroll_handler.checkScrolling(),t}return!1},t.prototype._mouseStop=function(e){return!(!this.options.dragAndDrop||!this.dnd_handler)&&this.dnd_handler.mouseStop(e)},t.prototype._initData=function(){this.options.data?this._loadData(this.options.data,null):this._getDataUrlInfo(null)?this._loadDataFromUrl(null,null,null):this._loadData([],null)},t.prototype._getDataUrlInfo=function(e){var t=this,o=this.options.dataUrl||this.element.data("url");return"function"==typeof o?o(e):"string"==typeof o?function(){var n={url:o};if(e&&e.id){var r={node:e.id};n.data=r}else{var i=t._getNodeIdToBeSelected();i&&(r={selected_node:i},n.data=r)}return n}():o},t.prototype._getNodeIdToBeSelected=function(){return this.options.saveState&&this.save_state_handler?this.save_state_handler.getNodeIdToBeSelected():null},t.prototype._initTree=function(e){var t=this,o=function(){t.is_initialized||(t.is_initialized=!0,t._triggerEvent("tree.init"))};this.tree=new this.options.nodeClass(null,!0,this.options.nodeClass),this.select_node_handler&&this.select_node_handler.clear(),this.tree.loadFromData(e);var n=this._setInitialState();this._refreshElements(null),n?this._setInitialStateOnDemand(o):o()},t.prototype._setInitialState=function(){var e=this,t=function(){if(e.options.saveState&&e.save_state_handler){var t=e.save_state_handler.getStateFromStorage();return t?[!0,e.save_state_handler.setInitialState(t)]:[!1,!1]}return[!1,!1]}(),o=t[0],n=t[1];return o||(n=function(){if(!1===e.options.autoOpen)return!1;var t=e._getAutoOpenMaxLevel(),o=!1;return e.tree.iterate(function(e,n){return e.load_on_demand?(o=!0,!1):!!e.hasChildren()&&(e.is_open=!0,n!==t)}),o}()),n},t.prototype._setInitialStateOnDemand=function(e){var t,o,n,r=this;(function(){if(r.options.saveState&&r.save_state_handler){var t=r.save_state_handler.getStateFromStorage();return!!t&&(r.save_state_handler.setInitialStateOnDemand(t,e),!0)}return!1})()||(t=r._getAutoOpenMaxLevel(),o=0,(n=function(){r.tree.iterate(function(e,i){return e.load_on_demand?(e.is_loading||function(e){o+=1,r._openNode(e,!1,function(){o-=1,n()})}(e),!1):(r._openNode(e,!1,null),i!==t)}),0===o&&e()})())},t.prototype._getAutoOpenMaxLevel=function(){return!0===this.options.autoOpen?-1:parseInt(this.options.autoOpen,10)},t.prototype._getClickTarget=function(e){var t=a(e),o=t.closest(".jqtree-toggler");if(o.length){if(n=this._getNode(o))return{type:"button",node:n}}else{var n,r=t.closest(".jqtree-element");if(r.length)if(n=this._getNode(r))return{type:"label",node:n}}return null},t.prototype._getNode=function(e){var t=e.closest("li.jqtree_common");return 0===t.length?null:t.data("node")},t.prototype._saveState=function(){this.options.saveState&&this.save_state_handler&&this.save_state_handler.saveState()},t.prototype._selectCurrentNode=function(){var e=this.getSelectedNode();if(e){var t=this._getNodeElementForNode(e);t&&t.select(!0)}},t.prototype._deselectCurrentNode=function(){var e=this.getSelectedNode();e&&this.removeFromSelection(e)},t.prototype._getDefaultClosedIcon=function(){return this.options.rtl?"&#x25c0;":"&#x25ba;"},t.prototype._getRtlOption=function(){if(null!=this.options.rtl)return this.options.rtl;var e=this.element.data("rtl");return null!=e&&!1!==e},t.prototype._notifyLoading=function(e,t,o){this.options.onLoading&&this.options.onLoading(e,t,o)},t.prototype._selectNode=function(e,t){var o=this;if(void 0===t&&(t=!1),this.select_node_handler){var n=function(){o.options.saveState&&o.save_state_handler&&o.save_state_handler.saveState()};if(!e)return this._deselectCurrentNode(),void n();if(o.options.onCanSelectNode?o.options.selectable&&o.options.onCanSelectNode(e):o.options.selectable){if(this.select_node_handler.isNodeSelected(e))t&&(this._deselectCurrentNode(),this._triggerEvent("tree.select",{node:null,previous_node:e}));else{var r=this.getSelectedNode();this._deselectCurrentNode(),this.addToSelection(e),this._triggerEvent("tree.select",{node:e,deselected_node:r}),(i=e.parent)&&i.parent&&!i.is_open&&o.openNode(i,!1)}var i;n()}}},t.prototype._loadData=function(e,t){e&&(this._triggerEvent("tree.load_data",{tree_data:e}),t?(this._deselectNodes(t),this._loadSubtree(e,t)):this._initTree(e),this.isDragging()&&this.dnd_handler&&this.dnd_handler.refresh())},t.prototype._deselectNodes=function(e){if(this.select_node_handler)for(var t=0,o=this.select_node_handler.getSelectedNodesUnder(e);t<o.length;t++){var n=o[t];this.select_node_handler.removeFromSelection(n)}},t.prototype._loadSubtree=function(e,t){t.loadFromData(e),t.load_on_demand=!1,t.is_loading=!1,this._refreshElements(t)},t.prototype._loadDataFromUrl=function(e,t,o){var n,r=this,i=null,d=e,l=function(){i&&(i.removeClass("jqtree-loading"),r._notifyLoading(!1,t,i))},s=function(e){l(),r._loadData(e,t),o&&"function"==typeof o&&o()},u=function(e){var t=function(e){return r.options.dataFilter?r.options.dataFilter(e):e}(function(e){return e instanceof Array||"object"==typeof e?e:null!=e?a.parseJSON(e):[]}(e));s(t)},c=function(e){l(),r.options.onLoadFailed&&r.options.onLoadFailed(e)};return e||(d=this._getDataUrlInfo(t)),(i=t?a(t.element):r.element).addClass("jqtree-loading"),r._notifyLoading(!0,t,i),d?d instanceof Array?void s(d):(n="string"==typeof d?{url:d}:(d.method||(d.method="get"),d),void a.ajax(a.extend({},n,{method:null!=d.method?d.method.toUpperCase():"GET",cache:!1,dataType:"json",success:u,error:c}))):void l()},t.prototype._loadFolderOnDemand=function(e,t,o){var n=this;void 0===t&&(t=!0),e.is_loading=!0,this._loadDataFromUrl(null,e,function(){n._openNode(e,t,o)})},t.defaults={animationSpeed:"fast",autoOpen:!1,saveState:!1,dragAndDrop:!1,selectable:!0,useContextMenu:!0,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:!0,dataUrl:null,closedIcon:null,openedIcon:"&#x25bc;",slide:!0,nodeClass:_.Node,dataFilter:null,keyboardSupport:!0,openFolderDelay:500,rtl:!1,onDragMove:null,onDragStop:null,buttonLeft:!0,onLoading:null,tabIndex:0},t}(u.default);f.default.register(v,"tree")},function(e,t,o){"use strict";t.__esModule=!0,t.example_data=[{label:"node1",id:123,int_property:1,str_property:"1",children:[{label:"child1",id:125,int_property:2},{label:"child2",id:126}]},{label:"node2",id:124,int_property:3,str_property:"3",children:[{label:"child3",id:127}]}],t.example_data2=[{label:"main",children:[{label:"c1"},{label:"c2"}]}],t.formatNodes=function(e){return e.map(function(e){return e.name}).join(" ")},t.isNodeClosed=function(e){return e.is("li.jqtree-folder.jqtree-closed")&&e.find("a:eq(0)").is("a.jqtree-toggler.jqtree-closed")&&e.find("ul:eq(0)").is("ul")},t.isNodeOpen=function(e){return e.is("li.jqtree-folder")&&e.find("a:eq(0)").is("a.jqtree-toggler")&&e.find("ul:eq(0)").is("ul")&&!e.is("li.jqtree-folder.jqtree-closed")&&!e.find("span:eq(0)").is("a.jqtree-toggler.jqtree-closed")},t.formatTitles=function(e){return e.find(".jqtree-title").map(function(e,t){return $(t).text()}).toArray().join(" ")},t.doGetNodeByName=function(e,t){var o=e.getNodeByName(t);if(!o)throw Error("Node with name '"+t+"' not found");return o},t.doGetNodeById=function(e,t){var o=e.getNodeById(t);if(!o)throw Error("Node with id '"+t+"' not found");return o}},function(e,t,o){"use strict";t.__esModule=!0},function(e,t,o){"use strict";t.__esModule=!0,o(13);var n=o(14),r=o(0);o(15);e=QUnit.module;var i=QUnit.test;function a(e,t,o){var r=$("#tree1");r.tree({data:n.example_data});var i=r.tree("getNodeByName","node2"),a=o.async();function d(e){o.equal(e.name,"node2"),o.ok(e.is_open),a()}t?r.tree("openNode",i,e,d):r.tree("openNode",i,d)}e("jqtree",{beforeEach:function(){$("body").append('<div id="tree1"></div>')},afterEach:function(){var e=$("#tree1");e.tree("destroy"),e.remove(),$.mockjax.clear()}}),i("create jqtree from data",function(e){$("#tree1").tree({data:n.example_data}),e.equal($("#tree1").children().length,1,"number of children on level 0"),e.ok($("#tree1").children().is("ul.jqtree-tree"),"first element is ul.jqtree-tree"),e.equal($("#tree1 ul.jqtree-tree > li").length,2,"number of children on level 1"),e.ok($("#tree1 ul.jqtree-tree li:eq(0)").is("li.jqtree-folder.jqtree-closed"),"first child is li.jqtree-folder.jqtree-closed"),e.ok($("#tree1 ul.jqtree-tree li:eq(0) > .jqtree-element > a.jqtree-toggler").is("a.jqtree-toggler.jqtree-closed"),"button in first folder"),e.equal($("#tree1 ul.jqtree-tree li:eq(0) > .jqtree-element span.jqtree-title").text(),"node1")}),i("toggle",function(e){var t,o,r=e.async(),i=$("#tree1");i.tree({data:n.example_data}),i.on("tree.open",function(){e.ok(!n.isNodeClosed(t),"node1 is open"),i.tree("toggle",o)}),i.on("tree.close",function(){e.ok(n.isNodeClosed(t),"node1 is closed"),r()});var a=i.tree("getTree");o=a.children[0],t=i.find("ul.jqtree-tree li:eq(0)"),e.ok(n.isNodeClosed(t),"node1 is closed"),i.tree("toggle",o)}),i("click event",function(e){var t=0,o=$("#tree1");o.tree({data:n.example_data,selectable:!0});var r=o.find("ul.jqtree-tree li:first").find("span:first");o.on("tree.click",function(t){e.equal(t.node.name,"node1")});var i=e.async();o.on("tree.select",function(n){1===(t+=1)?(e.equal(n.node.name,"node1"),e.equal(o.tree("getSelectedNode").name,"node1"),r.click()):(e.equal(n.node,null),e.equal(n.previous_node.name,"node1"),e.equal(o.tree("getSelectedNode"),!1),i())}),r.click()}),i("saveState",function(e){var t,o=$("#tree1");function r(e){t=e}function i(){return t}function a(){o.tree({data:n.example_data,saveState:!0,onSetStateFromStorage:r,onGetStateFromStorage:i,selectable:!0})}a();var d=o.tree("getTree");d.iterate(function(t){return e.ok(!t.is_open,"jqtree-closed"),!0}),o.tree("toggle",d.children[0]),e.ok(d.children[0].is_open,"node1 is_open"),o.tree("selectNode",d.children[1]),e.equal(o.tree("getSelectedNode").name,"node2","getSelectedNode (1)"),o.tree("destroy"),a();var l=o.tree("getTree");e.ok(l.children[0].is_open,"node1 is_open"),e.ok(!l.children[1].is_open,"node2 is closed"),e.equal(o.tree("getSelectedNode").name,"node2","getSelectedNode (2)")}),i("getSelectedNode",function(e){var t=$("#tree1");t.tree({data:n.example_data,selectable:!0}),e.equal(t.tree("getSelectedNode"),!1,"getSelectedNode");var o=t.tree("getTree").children[0];t.tree("selectNode",o),e.equal(t.tree("getSelectedNode").name,"node1","getSelectedNode")}),i("toJson",function(e){var t=$("#tree1");t.tree({data:n.example_data}),e.equal(t.tree("toJson"),'[{"name":"node1","id":123,"int_property":1,"str_property":"1","children":[{"name":"child1","id":125,"int_property":2},{"name":"child2","id":126}]},{"name":"node2","id":124,"int_property":3,"str_property":"3","children":[{"name":"child3","id":127}]}]');var o=t.tree("getTree");e.equal(o.children.length,2),e.ok(void 0!==o.children[0].parent,"parent"),e.ok($(o.children[0].element).is("li"),"element")}),i("loadData",function(e){var t=$("#tree1");t.tree({data:n.example_data,autoOpen:!0}),e.equal(t.find("> ul > li:first .jqtree-element:first > span").text(),"node1"),t.tree("loadData",n.example_data2),e.equal(t.find("> ul > li:first .jqtree-element:first > span").text(),"main"),t.tree("loadData",n.example_data);var o=t.tree("getNodeByName","child3");t.tree("loadData",[{label:"c4",id:200},{label:"c5",id:201,children:[{label:"c6",id:202}]}],o),e.equal(t.find("li:eq(0)").find(".jqtree-element:eq(0) span.jqtree-title").text(),"node1");var r=t.find("span:contains(child3)"),i=r.closest("li");e.equal(i.children("ul").children("li:eq(0)").find(".jqtree-element span.jqtree-title").text(),"c4"),e.ok(r.prev().is("a.jqtree-toggler"),"node 'child3' must have toggler button");var a=t.tree("getNodeByName","c5");t.tree("selectNode",a),e.equal(t.tree("getSelectedNode").name,"c5");t.tree("loadData",[{label:"c7"},{label:"c8"}],o),e.equal(t.tree("getSelectedNode"),!1),t.tree("selectNode",t.tree("getNodeByName","c7")),e.equal(t.tree("getSelectedNode").name,"c7"),t.tree("loadData",["c9"],o),e.equal(t.tree("getSelectedNode"),!1),t.tree("selectNode",t.tree("getNodeByName","c9"));var d=t.tree("getNodeByName","child2");t.tree("loadData",["c10"],d),e.equal(t.tree("getSelectedNode").name,"c9")}),i("openNode and closeNode",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","node2");e.equal(o.name,"node2"),e.equal(o.is_open,void 0),t.tree("openNode",o,!1),e.equal(o.is_open,!0),e.equal(n.isNodeOpen($(o.element)),!0),t.tree("closeNode",o,!1),e.equal(o.is_open,!1),e.equal(n.isNodeClosed($(o.element)),!0);var r=t.tree("getNodeByName","node1"),i=t.tree("getNodeByName","child1");t.tree("appendNode","child1a",i),e.equal(r.is_open,void 0),t.tree("openNode",i,!1),e.equal(r.is_open,!0),e.equal(i.is_open,!0)}),i("openNode with callback with slide true",function(e){a(!0,!0,e)}),i("openNode with callback with slide false",function(e){a(!1,!0,e)}),i("openNode with callback with slide null",function(e){a(null,!0,e)}),i("openNode with callback without slide param",function(e){a(null,!1,e)}),i("selectNode",function(e){var t=$("#tree1");t.tree({data:n.example_data,selectable:!0});var o=t.tree("getTree").children[0],r=t.tree("getTree").children[1],i=r.children[0];e.equal(i.name,"child3"),e.equal(o.is_open,void 0),e.equal(r.is_open,void 0),e.equal(i.is_open,void 0),t.tree("selectNode",i,!0),e.equal(t.tree("getSelectedNode").name,"child3"),e.equal(o.is_open,void 0),e.equal(r.is_open,!0),e.equal(i.is_open,void 0),t.tree("selectNode",o),e.equal(t.tree("getSelectedNode").name,"node1"),e.equal(t.tree("isNodeSelected",o),!0),t.tree("selectNode",null),e.equal(t.tree("getSelectedNode"),!1),e.equal(t.tree("isNodeSelected",o),!1)}),i("selectNode when another node is selected",function(e){var t=$("#tree1");t.tree({data:n.example_data,selectable:!0});var o=t.tree("getTree").children[0],r=t.tree("getTree").children[1];t.tree("selectNode",r),e.equal(t.tree("getSelectedNode").name,"node2");var i=!1;t.on("tree.select",function(t){e.equal(t.deselected_node,r),i=!0}),t.tree("selectNode",o),e.equal(t.tree("getSelectedNode").name,"node1"),e.equal(t.tree("isNodeSelected",o),!0),e.ok(i)}),i("click toggler",function(e){var t=e.async(),o=$("#tree1");o.tree({data:n.example_data,selectable:!0});var r=o.find("li:eq(0)").find("> .jqtree-element > span.jqtree-title");e.equal(r.text(),"node1");var i=r.prev();e.ok(i.is("a.jqtree-toggler.jqtree-closed")),o.on("tree.open",function(t){e.equal(t.node.name,"node1"),i.click()}),o.on("tree.close",function(o){e.equal(o.node.name,"node1"),t()}),i.click()}),i("getNodeById",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","node2");e.equal(t.tree("getNodeById",124).name,"node2"),e.equal(t.tree("getNodeById",333),null),e.equal(t.tree("getNodeById","124").name,"node2"),t.tree("appendNode",{label:"abc",id:"234"}),e.equal(t.tree("getNodeById",234).name,"abc"),e.equal(t.tree("getNodeById","234").name,"abc");t.tree("loadData",[{label:"sub1",id:200,children:[{label:"sub2",id:201}]}],o);var r=t.tree("getTree");e.notEqual(r,null),e.equal(t.tree("getNodeById",200).name,"sub1"),e.equal(t.tree("getNodeById",201).name,"sub2")}),i("autoOpen",function(e){var t=$("#tree1");function o(){var e=[];return t.find("li").each(function(){var t=$(this);if(t.is(".jqtree-folder")&&!t.is(".jqtree-closed")){var o=t.children(".jqtree-element").find("span").text();e.push(o)}}),e.join(";")}var n=[{label:"l1n1",children:["l2n1",{label:"l2n2",children:[{label:"l3n1",children:["l4n1"]}]}]},"l1n2"];t.tree({data:n,autoOpen:!1}),e.equal(o(),""),t.tree("destroy"),t.tree({data:n,autoOpen:!0}),e.equal(o(),"l1n1;l2n2;l3n1"),t.tree("destroy"),t.tree({data:n,autoOpen:1}),e.equal(o(),"l1n1;l2n2")}),i("onCreateLi",function(e){var t=$("#tree1");t.tree({data:n.example_data,onCreateLi:function(e,t){t.children(".jqtree-element").find("span").html("_"+e.name+"_")}}),e.equal(t.find("span:eq(0)").text(),"_node1_")}),i("save state",function(e){"undefined"!=typeof localStorage&&localStorage.setItem("my_tree","");var t=$("#tree1");t.tree({data:n.example_data,selectable:!0,saveState:"my_tree"});var o=t.tree("getTree");e.equal(t.tree("getSelectedNode"),!1),t.tree("selectNode",o.children[0]),e.equal(t.tree("getSelectedNode").name,"node1"),t.tree("destroy"),t.tree({data:n.example_data,selectable:!0,saveState:"my_tree"}),e.equal(t.tree("getSelectedNode").name,"node1")}),i("generate hit areas",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeById",123),i=t.tree("testGenerateHitAreas",o),a=$.map(i,function(e){var t=r.getPositionName(e.position);return e.node.name+" "+t});e.equal(a.join(";"),"node1 none;node2 inside;node2 after")}),i("removeNode",function(e){var t=$("#tree1");t.tree({data:n.example_data,selectable:!0});var o=t.tree("getNodeByName","child1");t.tree("selectNode",o),e.equal(t.tree("getSelectedNode").name,"child1"),t.tree("removeNode",o),e.equal(n.formatTitles(t),"node1 child2 node2 child3"),e.equal(t.tree("getSelectedNode"),!1),t.tree("loadData",n.example_data);var r=t.tree("getNodeByName","child3");t.tree("removeNode",r),e.equal(n.formatTitles(t),"node1 child1 child2 node2"),e.equal(t.tree("getSelectedNode"),!1),t.tree("loadData",n.example_data);var i=t.tree("getNodeByName","child1"),a=t.tree("getNodeByName","node1");t.tree("selectNode",i),t.tree("removeNode",a),e.equal(t.tree("getSelectedNode"),!1),t.tree("loadData",n.example_data2);var d=t.tree("getNodeByName","c1");t.tree("removeNode",d),e.equal(n.formatTitles(t),"main c2")}),i("appendNode",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","node1");t.tree("appendNode","child3",o),e.equal(n.formatTitles($(o.element)),"node1 child1 child2 child3");var r=t.tree("getNodeByName","child1");e.equal($(r.element).find("> .jqtree-element > .jqtree-toggler").length,0),t.tree("appendNode","child4",r),e.equal(n.formatTitles($(r.element)),"child1 child4"),e.equal($(r.element).find("> .jqtree-element > .jqtree-toggler").length,1)}),i("prependNode",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","node1");t.tree("prependNode","child0",o),e.equal(n.formatTitles($(o.element)),"node1 child0 child1 child2")}),i("init event for local data",function(e){var t=e.async(),o=$("#tree1");o.on("tree.init",function(){e.equal(o.tree("getNodeByName","node2").name,"node2"),t()}),o.tree({data:n.example_data})}),i("init event for ajax",function(e){var t=e.async(),o=$("#tree1");$.mockjax({url:"/tree/",responseText:n.example_data,logging:!1}),o.on("tree.init",function(){e.equal(o.tree("getNodeByName","node2").name,"node2"),t()}),o.tree({dataUrl:"/tree/"})}),i("updateNode",function(e){var t=$("#tree1");t.tree({data:n.example_data}),e.equal(n.formatTitles(t),"node1 child1 child2 node2 child3");var o=t.tree("getNodeByName","node2");t.tree("updateNode",o,"CHANGED"),e.equal(n.formatTitles(t),"node1 child1 child2 CHANGED child3"),e.equal(o.name,"CHANGED"),t.tree("updateNode",o,{name:"xyz",tag1:"abc"}),e.equal(n.formatTitles(t),"node1 child1 child2 xyz child3"),e.equal(o.name,"xyz"),e.equal(o.tag1,"abc"),e.equal(o.id,124),t.tree("updateNode",o,{id:555}),e.equal(o.id,555),e.equal(o.name,"xyz");var r=t.tree("getNodeById",555);e.equal(r.name,"xyz");var i=t.tree("getNodeById",124);e.equal(i,void 0);var a=t.tree("getNodeByName","child1");t.tree("updateNode",a,"child1a"),e.equal(n.formatTitles(t),"node1 child1a child2 xyz child3"),t.tree("selectNode",a),t.tree("updateNode",a,"child1b"),e.ok($(a.element).hasClass("jqtree-selected")),t.tree("updateNode",a,{id:a.id,name:"child1",children:[{id:5,name:"child1-1"}]}),e.equal(n.formatTitles(t),"node1 child1 child1-1 child2 xyz child3"),t.tree("updateNode",a,{id:a.id,name:"child1",children:[]}),e.equal(n.formatTitles(t),"node1 child1 child2 xyz child3")}),i("moveNode",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","child1"),r=t.tree("getNodeByName","child2"),i=t.tree("getNodeByName","node1"),a=t.tree("getNodeByName","node2");t.tree("moveNode",o,a,"after"),e.equal(n.formatTitles(t),"node1 child2 node2 child3 child1"),t.tree("moveNode",i,r,"inside")}),i("load on demand",function(e){var t=e.async(),o=$("#tree1");o.tree({data:[{id:1,label:"node1",load_on_demand:!0}],dataUrl:"/tree/"}),$.mockjax({url:"*",response:function(t){e.equal(t.url,"/tree/","2"),e.deepEqual(t.data,{node:1},"3"),this.responseText=[{id:2,label:"child1"}]},logging:!1});var r=o.tree("getNodeByName","node1");e.equal(n.formatTitles(o),"node1","1"),o.tree("openNode",r,function(r){e.equal(r.name,"node1"),e.equal(n.formatTitles(o),"node1 child1","4"),t()})}),i("addNodeAfter",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","node1");t.tree("addNodeAfter","node3",o),e.equal(n.formatTitles(t),"node1 child1 child2 node3 node2 child3")}),i("addNodeBefore",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","node1");t.tree("addNodeBefore","node3",o),e.equal(n.formatTitles(t),"node3 node1 child1 child2 node2 child3")}),i("addParentNode",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","child3");t.tree("addParentNode","node3",o),e.equal(n.formatTitles(t),"node1 child1 child2 node2 node3 child3")}),i("mouse events",function(e){var t=$("#tree1");function o(e){var o=t.tree("getNodeByName",e),n=$(o.element);return $(n.find(".jqtree-title"))}t.tree({data:n.example_data,dragAndDrop:!0,autoOpen:!0}),t.tree("setMouseDelay",0);var r=o("node1"),i=o("child3");r.trigger($.Event("mousedown",{which:1}));var a=i.offset();t.trigger($.Event("mousemove",{pageX:a?a.left:0,pageY:a?a.top:0})),t.trigger("mouseup"),e.equal(n.formatTitles(t),"node2 child3 node1 child1 child2")}),i("multiple select",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","child1"),r=t.tree("getNodeByName","child2");t.tree("addToSelection",o),t.tree("addToSelection",r);var i=t.tree("getSelectedNodes");e.equal(n.formatNodes(i),"child1 child2")}),i("keyboard",function(e){var t=$("#tree1");function o(e){t.trigger($.Event("keydown",{which:e}))}t.tree({data:n.example_data});var r=t.tree("getNodeByName","node1");t.tree("selectNode",r),e.equal(r.is_open,void 0),o(40),e.equal(t.tree("getSelectedNode").name,"node2"),o(38),e.equal(t.tree("getSelectedNode").name,"node1"),o(39),e.equal(r.is_open,!0),e.equal(t.tree("getSelectedNode").name,"node1"),o(40),e.equal(t.tree("getSelectedNode").name,"child1"),o(38),e.equal(t.tree("getSelectedNode").name,"node1"),o(37),e.equal(r.is_open,!1),e.equal(t.tree("getSelectedNode").name,"node1")}),i("getNodesByProperty",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=t.tree("getNodeByName","node2");e.equal(t.tree("getNodesByProperty","int_property",1)[0].name,"node1"),e.equal(t.tree("getNodesByProperty","int_property",123).length,0),e.equal(t.tree("getNodesByProperty","str_property","1")[0].name,"node1"),t.tree("appendNode",{label:"abc",id:"234",str_property:"111",int_property:111}),e.equal(t.tree("getNodesByProperty","int_property",111)[0].name,"abc"),e.equal(t.tree("getNodesByProperty","str_property","111")[0].name,"abc");t.tree("loadData",[{label:"sub1",id:200,int_property:222,children:[{label:"sub2",id:201,int_property:444}]}],o);var r=t.tree("getTree");e.notEqual(r,null),e.equal(t.tree("getNodesByProperty","int_property",222)[0].name,"sub1"),e.equal(t.tree("getNodesByProperty","int_property",444)[0].name,"sub2")}),i("dataUrl extra options",function(e){var t=e.async(),o=$("#tree1");$.mockjax({url:"*",response:function(o){e.equal(o.url,"/tree2/"),e.deepEqual(o.headers,{abc:"def"}),t()},logging:!1}),o.tree({dataUrl:{url:"/tree2/",headers:{abc:"def"}}})}),i("dataUrl is function",function(e){var t=e.async(),o=$("#tree1");$.mockjax({url:"*",response:function(o){e.equal(o.url,"/tree3/"),e.deepEqual(o.headers,{abc:"def"}),t()},logging:!1}),o.tree({dataUrl:function(){return{url:"/tree3/",headers:{abc:"def"}}}})}),i("getNodeByHtmlElement",function(e){var t=$("#tree1");t.tree({data:n.example_data});var o=$(".jqtree-title"),r=t.tree("getNodeByHtmlElement",o);e.equal(r.name,"node1");var i=t.tree("getNodeByHtmlElement",o[0]);e.equal(i.name,"node1")}),i("onLoadFailed",function(e){$.mockjax({url:"/tree/",status:500,responseText:"test error",logging:!1});var t=e.async();$("#tree1").tree({dataUrl:"/tree/",onLoadFailed:function(o){e.equal(o.responseText,"test error"),t()}})})},function(e,t,o){"use strict";t.__esModule=!0;e=QUnit.module;var n=QUnit.test,r=o(14),i=o(0);e("Tree"),n("constructor",function(e){var t=new i.Node("n1");e.equal(t.name,"n1"),e.equal(t.children.length,0),e.equal(t.parent,null);var o=new i.Node({label:"n2",id:123,parent:"abc",children:["c"],url:"/"});e.equal(o.name,"n2"),e.equal(o.id,123),e.equal(o.url,"/"),e.equal(o.label,void 0),e.equal(o.children.length,0),e.equal(o.parent,null)}),n("create tree from data",function(e){function t(t){e.equal(r.formatNodes(t.children),"node1 node2","nodes on level 1"),e.equal(r.formatNodes(t.children[0].children),"child1 child2","children of node1"),e.equal(r.formatNodes(t.children[1].children),"child3","children of node2"),e.equal(t.children[0].id,123,"id")}var o=new i.Node({},!0);o.loadFromData(r.example_data),t(o);var n=new i.Node({},!0);n.loadFromData([{label:"node1",id:123,children:["child1","child2"]},{label:"node2",id:124,children:["child3"]}]),t(n)}),n("addChild",function(e){var t=new i.Node("tree1",!0);t.addChild(new i.Node("abc")),t.addChild(new i.Node("def")),e.equal(r.formatNodes(t.children),"abc def","children");var o=t.children[0];o.parent?e.equal(o.parent.name,"tree1","parent of node"):e.ok(!1,"Node has no parent")}),n("addChildAtPosition",function(e){var t=new i.Node({},!0);t.addChildAtPosition(new i.Node("abc"),0),t.addChildAtPosition(new i.Node("ghi"),2),t.addChildAtPosition(new i.Node("def"),1),t.addChildAtPosition(new i.Node("123"),0),e.equal(r.formatNodes(t.children),"123 abc def ghi","children")}),n("removeChild",function(e){var t=new i.Node({},!0),o=new i.Node({label:"abc",id:1}),n=new i.Node({label:"def",id:2}),a=new i.Node({label:"ghi",id:3});t.addChild(o),t.addChild(n),t.addChild(a);var d=new i.Node({label:"jkl",id:4});n.addChild(d),e.equal(r.formatNodes(t.children),"abc def ghi","children"),e.equal(t.id_mapping[2].name,"def"),e.equal(t.id_mapping[4].name,"jkl"),t.removeChild(n),e.equal(r.formatNodes(t.children),"abc ghi","children"),e.equal(t.id_mapping[2],null),e.equal(t.id_mapping[4],null),t.removeChild(a),e.equal(r.formatNodes(t.children),"abc","children"),t.removeChild(o),e.equal(r.formatNodes(t.children),"","children")}),n("getChildIndex",function(e){var t=new i.Node({},!0),o=new i.Node("abc"),n=new i.Node("def"),r=new i.Node("ghi");t.addChild(o),t.addChild(n),t.addChild(r),e.equal(t.getChildIndex(n),1),e.equal(t.getChildIndex(new i.Node("xyz")),-1)}),n("hasChildren",function(e){var t=new i.Node({},!0);e.equal(t.hasChildren(),!1,"tree without children"),t.addChild(new i.Node("abc")),e.equal(t.hasChildren(),!0,"tree has children")}),n("iterate",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=[];t.iterate(function(e){return o.push(e),!0}),e.equal(r.formatNodes(o),"node1 child1 child2 node2 child3","all nodes");var n=[];t.iterate(function(e){return n.push(e),!1}),e.equal(r.formatNodes(n),"node1 node2","nodes on first level"),r.doGetNodeById(t,124).children[0].addChild(new i.Node("child4"));var a=[];t.iterate(function(e,t){return a.push(e.name+" "+t),!0}),e.equal(a.join(","),"node1 0,child1 1,child2 1,node2 0,child3 1,child4 2")}),n("moveNode",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=t.children[0],n=t.children[1],a=o.children[0],d=o.children[1];e.equal(n.name,"node2","node2 name"),e.equal(d.name,"child2","child2 name"),t.moveNode(d,n,i.Position.After),e.equal(r.formatNodes(t.children),"node1 node2 child2","tree nodes at first level"),e.equal(r.formatNodes(o.children),"child1","node1 children"),t.moveNode(a,n,i.Position.Inside),e.equal(r.formatNodes(n.children),"child1 child3","node2 children"),e.equal(r.formatNodes(o.children),"","node1 has no children"),t.moveNode(d,a,i.Position.Before),e.equal(r.formatNodes(n.children),"child2 child1 child3","node2 children"),e.equal(r.formatNodes(t.children),"node1 node2","tree nodes at first level")}),n("initFromData",function(e){var t=new i.Node({},!0);t.initFromData({label:"main",children:["c1",{label:"c2",id:201}]}),e.equal(t.name,"main"),e.equal(r.formatNodes(t.children),"c1 c2","children"),e.equal(t.children[1].id,201)}),n("getData",function(e){var t=new i.Node({},!0);e.deepEqual(t.getData(),[]),t.loadFromData([{label:"n1",children:[{label:"c1"}]}]),e.deepEqual(t.getData(),[{name:"n1",children:[{name:"c1"}]}]);var o=r.doGetNodeByName(t,"n1");e.deepEqual(o.getData(!0),[{name:"n1",children:[{name:"c1"}]}])}),n("addAfter",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data),e.equal(r.formatNodes(t.children),"node1 node2"),r.doGetNodeByName(t,"node2").addAfter("node_b"),e.equal(r.formatNodes(t.children),"node1 node2 node_b");var o=r.doGetNodeByName(t,"node_b");e.equal(o.name,"node_b"),r.doGetNodeByName(t,"node1").addAfter("node_a"),e.equal(r.formatNodes(t.children),"node1 node_a node2 node_b"),o&&o.addAfter({label:"node_c",id:789});var n=r.doGetNodeByName(t,"node_c");e.equal(n.id,789),e.equal(r.formatNodes(t.children),"node1 node_a node2 node_b node_c"),e.equal(t.addAfter("node_x"),null)}),n("addBefore",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data),r.doGetNodeByName(t,"node1").addBefore("node0"),e.equal(r.formatNodes(t.children),"node0 node1 node2"),e.equal(t.addBefore("x"),null)}),n("addParent",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data),r.doGetNodeByName(t,"node1").addParent("root");var o=r.doGetNodeByName(t,"root");e.equal(r.formatNodes(o.children),"node1 node2"),e.equal(t.addParent("x"),null)}),n("remove",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=r.doGetNodeByName(t,"child1"),n=r.doGetNodeByName(t,"node1");e.equal(r.formatNodes(n.children),"child1 child2"),e.equal(o.parent,n),o.remove(),e.equal(r.formatNodes(n.children),"child2"),e.equal(o.parent,null)}),n("append",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=r.doGetNodeByName(t,"node1");o.append("child3"),e.equal(r.formatNodes(o.children),"child1 child2 child3"),o.append({name:"child4",children:[{name:"child5"}]}),e.equal(r.formatNodes(o.children),"child1 child2 child3 child4");var n=r.doGetNodeByName(o,"child4");e.equal(r.formatNodes(n.children),"child5")}),n("prepend",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=r.doGetNodeByName(t,"node1");o.prepend("child0"),e.equal(r.formatNodes(o.children),"child0 child1 child2"),o.prepend({name:"child3",children:[{name:"child4"}]}),e.equal(r.formatNodes(o.children),"child3 child0 child1 child2");var n=r.doGetNodeByName(o,"child3");e.equal(r.formatNodes(n.children),"child4")}),n("getNodeById",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=r.doGetNodeById(t,124);e.equal(o.name,"node2"),o.remove(),e.equal(t.getNodeById(124),null),r.doGetNodeByName(t,"child2").append({id:456,label:"new node"});var n=r.doGetNodeById(t,456);e.equal(n.name,"new node")}),n("getLevel",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data),e.equal(r.doGetNodeByName(t,"node1").getLevel(),1),e.equal(r.doGetNodeByName(t,"child1").getLevel(),2)}),n("loadFromData and id mapping",function(e){var t=new i.Node({},!0);e.equal(t.getNodeById(999),null),t.loadFromData(r.example_data),e.equal(r.doGetNodeById(t,124).name,"node2");var o=r.doGetNodeById(t,126);o.addChild(new i.Node({label:"child4",id:128})),o.addChild(new i.Node({label:"child5",id:129})),o.loadFromData(["abc","def"]),e.equal(t.getNodeById(128),null),e.equal(o.children.length,2),e.equal(o.children[0].name,"abc")}),n("removeChildren",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=r.doGetNodeById(t,126);e.equal(o.name,"child2"),o.addChild(new i.Node({label:"child4",id:128})),o.addChild(new i.Node({label:"child5",id:129})),e.equal(r.doGetNodeById(t,128).name,"child4"),o.removeChildren(),e.equal(t.getNodeById(128),null),e.equal(o.children.length,0)}),n("node with id 0",function(e){var t=new i.Node({},!0);t.loadFromData([{id:0,label:"mynode"}]);var o=r.doGetNodeById(t,0);e.equal(o.name,"mynode"),o.remove(),e.equal(t.getNodeById(0),void 0)}),n("getPreviousSibling",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=r.doGetNodeByName(t,"child2").getPreviousSibling();o?e.equal(o.name,"child1"):e.ok(!1,"Previous sibling not found"),e.equal(t.getPreviousSibling(),null),e.equal(r.doGetNodeByName(t,"child1").getPreviousSibling(),null)}),n("getNextSibling",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=r.doGetNodeByName(t,"node1").getNextSibling();o?e.equal(o.name,"node2"):e.ok(!1,"Next sibling not found"),e.equal(r.doGetNodeByName(t,"node2").getNextSibling(),null),e.equal(t.getNextSibling(),null)}),n("getNodesByProperty",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=t.getNodesByProperty("name","child1");e.equal(o.length,1),e.equal(o[0].name,"child1")}),n("getNodeByCallback",function(e){var t=new i.Node({},!0);t.loadFromData(r.example_data);var o=t.getNodeByCallback(function(e){return"child1"===e.name});o?e.equal(o.name,"child1"):e.ok(!1,"Node not found")})},function(e,t,o){"use strict";t.__esModule=!0;e=QUnit.module;var n=QUnit.test,r=o(0);e("util"),n("getPositionName",function(e){e.equal(r.getPositionName(r.Position.Before),"before"),e.equal(r.getPositionName(r.Position.After),"after"),e.equal(r.getPositionName(r.Position.Inside),"inside"),e.equal(r.getPositionName(r.Position.None),"none")}),n("getPosition",function(e){e.equal(r.getPosition("inside"),r.Position.Inside)})},function(e,t,o){"use strict";t.__esModule=!0,o(18),o(17),o(16),QUnit.config.testTimeout=5e3},function(e,t,o){e.exports=o(19)}]);